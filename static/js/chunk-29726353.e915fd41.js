(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29726353"],{"159f":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[t("b-card",{attrs:{header:"Audit Logs Entry"}},[t("b-row",[t("b-col",[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"audit-description"}},[e._v("Description")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.dataValue.newCAR.description,expression:"dataValue.newCAR.description"}],staticClass:"form-control",attrs:{id:"audit-description",type:"text",name:"audit-description",placeholder:"Description"},domProps:{value:e.dataValue.newCAR.description},on:{input:function(a){a.target.composing||e.$set(e.dataValue.newCAR,"description",a.target.value)}}})])]),e._v(" "),t("b-col",[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"audit-date"}},[e._v("Date Created")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.dataValue.newCAR.createdate,expression:"dataValue.newCAR.createdate"}],staticClass:"form-control",attrs:{id:"audit-date",type:"date",name:"audit-date",placeholder:"Audit Date"},domProps:{value:e.dataValue.newCAR.createdate},on:{input:function(a){a.target.composing||e.$set(e.dataValue.newCAR,"createdate",a.target.value)}}})])])],1),e._v(" "),t("b-row",[t("b-col",[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"root-cause"}},[e._v("Root Cause")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.dataValue.newCAR.rootcause,expression:"dataValue.newCAR.rootcause"}],staticClass:"form-control",attrs:{id:"root-cause",type:"text",name:"root-cause",placeholder:"Root Cause"},domProps:{value:e.dataValue.newCAR.rootcause},on:{input:function(a){a.target.composing||e.$set(e.dataValue.newCAR,"rootcause",a.target.value)}}})])])],1),e._v(" "),t("b-row",[t("b-col",[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"action-plan"}},[e._v("Action Plan")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.dataValue.newCAR.action,expression:"dataValue.newCAR.action"}],staticClass:"form-control",attrs:{id:"action-plan",type:"text",name:"action-plan",placeholder:"Action Plan"},domProps:{value:e.dataValue.newCAR.action},on:{input:function(a){a.target.composing||e.$set(e.dataValue.newCAR,"action",a.target.value)}}})])]),e._v(" "),t("b-col",[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"action-plan-timeline"}},[e._v("Timeline")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.dataValue.newCAR.timeline,expression:"dataValue.newCAR.timeline"}],staticClass:"form-control",attrs:{id:"action-plan-timeline",type:"date",name:"action-plan-timeline",placeholder:"Timeline"},domProps:{value:e.dataValue.newCAR.timeline},on:{input:function(a){a.target.composing||e.$set(e.dataValue.newCAR,"timeline",a.target.value)}}})])])],1),e._v(" "),t("b-row",[t("b-col",[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"action-plan"}},[e._v("Corrective Action Report For")]),e._v(" "),t("cool-select",{attrs:{id:"cnsite",items:e.dropdown.filter((function(e){return"CAR for"==e.category})).map((function(e){return e.description})),placeholder:"CAR For"},model:{value:e.dataValue.newCAR.cartarget,callback:function(a){e.$set(e.dataValue.newCAR,"cartarget",a)},expression:"dataValue.newCAR.cartarget"}})],1)]),e._v(" "),t("b-col",[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEmpl,expression:"loadingEmpl"}],staticClass:"form-group"},[t("label",{attrs:{for:"action-plan"}},[e._v("Verifier")]),e._v(" "),t("vue-bootstrap-typeahead",{attrs:{data:e.employee.filter((function(a){return a.employeename2!=e.dataValue.newCAR.issuebyname&&a.employeename2!=e.dataValue.newCAR.issuetoname})),serializer:function(e){return e.employeename2},size:"lg",placeholder:"Verifier/Collaborator"},on:{hit:function(a){return e.selectVerifier(a)}},model:{value:e.dataValue.newCAR.verifiername,callback:function(a){e.$set(e.dataValue.newCAR,"verifiername",a)},expression:"dataValue.newCAR.verifiername"}})],1)])],1),e._v(" "),t("b-row",[t("b-col",[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEmpl,expression:"loadingEmpl"}],staticClass:"form-group"},[t("label",{attrs:{for:"action-plan"}},[e._v("Issued To")]),e._v(" "),t("vue-bootstrap-typeahead",{attrs:{data:e.employee.filter((function(a){return a.employeename2!=e.dataValue.newCAR.issuebyname&&a.employeename2!=e.dataValue.newCAR.verifiername})),serializer:function(e){return e.employeename2},size:"lg",placeholder:"Responsible"},on:{hit:function(a){return e.selectIssueTo(a)}},model:{value:e.dataValue.newCAR.issuetoname,callback:function(a){e.$set(e.dataValue.newCAR,"issuetoname",a)},expression:"dataValue.newCAR.issuetoname"}})],1)]),e._v(" "),t("b-col",[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"action-plan-timeline"}},[e._v("Department/Section Issued to")]),e._v(" "),t("b-input",{attrs:{disabled:""},model:{value:e.dataValue.newCAR.issuetodeptname,callback:function(a){e.$set(e.dataValue.newCAR,"issuetodeptname",a)},expression:"dataValue.newCAR.issuetodeptname"}})],1)])],1),e._v(" "),t("b-row",[t("b-col",[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingEmpl,expression:"loadingEmpl"}],staticClass:"form-group"},[t("label",{attrs:{for:"action-plan-timeline"}},[e._v("Issued By")]),e._v(" "),t("vue-bootstrap-typeahead",{attrs:{data:e.employee.filter((function(a){return a.employeename2!=e.dataValue.newCAR.issuetoname&&a.employeename2!=e.dataValue.newCAR.verifiername})),serializer:function(e){return e.employeename2},size:"lg",placeholder:"Issued By"},on:{hit:function(a){return e.selectIssueBy(a)}},model:{value:e.dataValue.newCAR.issuebyname,callback:function(a){e.$set(e.dataValue.newCAR,"issuebyname",a)},expression:"dataValue.newCAR.issuebyname"}})],1)]),e._v(" "),t("b-col",[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"action-plan"}},[e._v("Issuing Dept./Section")]),e._v(" "),t("b-input",{attrs:{disabled:""},model:{value:e.dataValue.newCAR.issuebydeptname,callback:function(a){e.$set(e.dataValue.newCAR,"issuebydeptname",a)},expression:"dataValue.newCAR.issuebydeptname"}})],1)])],1),e._v(" "),t("b-row",{staticClass:"text-center"},[t("b-col",[t("b-button",{attrs:{variant:"success"},on:{click:function(a){return e.postCAR()}}},[e._v("Save")])],1)],1)],1)],1)},o=[],l=(t("ac6a"),t("456d"),t("77c4")),s=t("3698"),i=t("a4f0"),r=t("0eed"),u=(t("5c96"),{components:{CoolSelect:s["a"]},data:function(){return{loadingEmpl:!1,loading:!1,dataValue:{QMSissue:{type:"CAR",Responsible:{memberID:null,fullname:null,emailaddress:null,mobileno:null,created_by:this.$store.state.user.userInfo.emplId,nickname:null,status:"A"},Issue:{issuedetails:null,actionplan:null,targetcompletiondate:null,raisedby:null,raisedbyemail:null,raisedbyempid:null,raisedbyphone:null,responsible:null,responemail:null,responempid:null,responphone:null,followfrequency:7,followmail:1,followsms:1,reference:null,referencetype:"QMS",collaboratorname:null,collaboratoremail:null,collaboratorempid:null,category:"I",pflag:1,issuetype:2,acknowledgebyrespondent:0,acknowledgedbysource:0,sourcetype:"M",fupcounter:0,status:0,meetingId:0,created_by:this.$store.state.user.userInfo.emplId}},input:null,newCAR:{description:null,rootcause:null,action:null,cartarget:null,cartargetref:null,timeline:null,issuebyempid:null,issuebyname:"",issuebydeptid:null,issuebydeptname:null,issuebyemail:null,verifierempid:null,verifiername:"",verifieremail:null,issuetoempid:null,issuetoname:"",issuetoemail:null,issuetodeptid:null,issuetodeptname:null,createdated:Date.now(),createby:this.$store.state.user.userInfo.emplId}}}},computed:{employee:function(){return this.$store.state.data.employees},dropdown:function(){return this.$store.state.data.dropdown}},beforeDestroy:function(){this.$store.state.data.carData=this.dataValue},created:function(){Object.keys(this.$store.state.data.carData).length>0&&(this.dataValue=this.$store.state.data.carData),0==this.employee.length&&this.getEmployees()},methods:{selectIssueTo:function(e){this.dataValue.newCAR.issuetoempid=e.empl_id,this.dataValue.newCAR.issuetodeptid=e.department,this.dataValue.newCAR.issuetodeptname=e.departmentname,this.dataValue.newCAR.issuetoemail=e.emailadd},selectIssueBy:function(e){this.dataValue.newCAR.issuebyempid=e.empl_id,this.dataValue.newCAR.issuebydeptid=e.department,this.dataValue.newCAR.issuebydeptname=e.departmentname,this.dataValue.newCAR.issuebyemail=e.emailadd},selectVerifier:function(e){this.dataValue.newCAR.verifierempid=e.empl_id,this.dataValue.newCAR.verifieremail=e.emailadd},postQMSIssue:function(e){var a=this;return a.dataValue.QMSissue={type:"CAR",Responsible:{memberID:a.dataValue.newCAR.issuetoempid,fullname:a.dataValue.newCAR.issuetoname,emailaddress:a.dataValue.newCAR.issuetoemail,mobileno:a.employee.filter((function(e){return e.empl_id==a.dataValue.newCAR.issuetoempid}))[0].employeepresentcontact,created_by:a.$store.state.user.userInfo.emplId,nickname:null,status:"A"},Issue:{issuedetails:a.dataValue.newCAR.description,actionplan:a.dataValue.newCAR.action,targetcompletiondate:a.dataValue.newCAR.timeline,raisedby:a.dataValue.newCAR.issuebyname,raisedbyemail:a.dataValue.newCAR.issuebyemail,raisedbyempid:a.dataValue.newCAR.issuebyempid,raisedbyphone:a.employee.filter((function(e){return e.empl_id==a.dataValue.newCAR.issuebyempid}))[0].employeepresentcontact,responsible:a.dataValue.newCAR.issuetoname,responemail:a.dataValue.newCAR.issuetoemail,responempid:a.dataValue.newCAR.issuetoempid,responphone:a.employee.filter((function(e){return e.empl_id==a.dataValue.newCAR.issuetoempid}))[0].employeepresentcontact,followfrequency:7,followmail:1,followsms:1,referenceId:e,referencetype:"QMS",collaboratorname:a.dataValue.newCAR.verifiername,collaboratoremail:a.dataValue.newCAR.verifieremail,collaboratorempid:a.dataValue.newCAR.verifierempid,category:"I",pflag:1,issuetype:2,acknowledgebyrespondent:0,acknowledgedbysource:0,sourcetype:"M",fupcounter:0,status:"O",meetingId:0,created_by:a.$store.state.user.userInfo.emplId}},a.loadingoverall=!0,new Promise((function(e,t){Object(i["a"])(a.dataValue.QMSissue).then((function(t){a.dataValue.newCAR={description:null,rootcause:null,action:null,cartarget:null,cartargetref:null,timeline:null,issuebyempid:null,issuebyname:null,issuebydeptid:null,issuebydeptname:null,verifierempid:null,verifiername:null,issuetoempid:null,issuetoname:null,issuetodeptid:null,issuetodeptname:null,createdated:Date.now(),createby:a.$store.state.user.userInfo.emplId},a.loadingoverall=!1,a.$message({showClose:!0,message:"Successfully saved!",type:"success"}),e()})).catch((function(e){a.loadingoverall=!1,t(e)}))}))},postCAR:function(){var e=this;return e.loadingoverall=!0,new Promise((function(a,t){Object(l["c"])(e.dataValue.newCAR).then((function(a){e.postQMSIssue(a.data)})).catch((function(a){e.loadingoverall=!1,t(a)}))}))},getEmployees:function(){var e=this;return e.loadingEmpl=!0,new Promise((function(a,t){Object(r["d"])().then((function(a){e.$store.state.data.employees=a.data,e.loadingEmpl=!1})).catch((function(a){e.loadingEmpl=!1,t(a)}))}))}}}),d=u,c=t("2877"),m=Object(c["a"])(d,n,o,!1,null,null,null);a["default"]=m.exports},"77c4":function(e,a,t){"use strict";t.d(a,"b",(function(){return o})),t.d(a,"a",(function(){return l})),t.d(a,"c",(function(){return s}));var n=t("b775");function o(e,a){return Object(n["a"])({url:"audit/post-audit-observation?isAddCAR="+a,method:"post",data:e})}function l(){return Object(n["a"])({url:"audit/get-audit-for-car",method:"get"})}function s(e){return Object(n["a"])({url:"correctiveaction/post-corrective",method:"post",data:e})}},a4f0:function(e,a,t){"use strict";var n=t("bc3a"),o=t.n(n),l=t("5c96"),s=t("4360"),i=t("5f87"),r=t("0f9a"),u=o.a.create({baseURL:"http://apps.fastlogistics.com.ph/paloupapi/api/",timeout:1e5});u.interceptors.request.use((function(e){return s["a"].getters.token&&(r["authorization"]&&(e.headers["Authorization"]=r["authorization"]),e.headers["token"]=Object(i["b"])(),e.headers["serverwarehouseId"]=52),e}),(function(e){return console.log(e),Promise.reject(e)})),u.interceptors.response.use((function(e){var a=e.data;return 200!==e.status?(Object(l["Message"])({message:a.message||"Error",type:"error",duration:5e3}),50008!==e.status&&50012!==e.status&&50014!==e.status||l["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){s["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(a.message||"Error"))):e}),(function(e){return console.log("err"+e),Object(l["Message"])({message:e.message,type:"error",duration:5e3}),Promise.reject(e)}));var d=u;function c(e){return d({url:"mifs/post-qms-issue",method:"post",data:e})}t.d(a,"a",(function(){return c}))}}]);